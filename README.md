# Фильтр желтушных новостей

Сервер принимает запрос на анализ статей с сайта inosmi.ru. Cсылки статей для анализа передаются query параметром.

Пример запроса:

```
GET http://localhost:8080/?urls=https://inosmi.ru/20240120/neyroseti-267505713.html,https://lenta.ru/brief/2021/08/26/afg_terror/,https://inosmi.ru/not/exist.html
```

В ответ сервер выдает json с результатами анализа статей. Пример ответа:
```
[{"status": "PARSING_ERROR", "url": "https://lenta.ru/brief/2021/08/26/afg_terror/", "score": null, "words_count": null}, {"status": "FETCH_ERROR", "url": "https://inosmi.ru/not/exist.html", "score": null, "words_count": null}, {"status": "OK", "url": "https://inosmi.ru/20240120/neyroseti-267505713.html", "score": 0.82, "words_count": 612}]
```

Для оценки используется список "заряженных" слов - экспрессивных, ярко-негативных или восторженных слов и фраз. Файлы со списком таких слов лежат в папке charged_dict.
Эти словари можно изменять по своему усмотрению. Алгоритм подсчитывает количество подобных слов в статье и рассчитывает "рейтинг желтушности".

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

# Как установить

Вам понадобится Python версии 3.7 или старше. Для установки пакетов рекомендуется создать виртуальное окружение.

Первым шагом установите пакеты:

```
pip install -r requirements.txt
```

# Как запустить

```
python server.py
```

# Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: text_tools.py и адаптеры. Команды для запуска тестов:

```
python -m pytest adapters/inosmi_ru.py
```

```
python -m pytest text_tools.py
```

```
python -m pytest main.py
```

# Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
